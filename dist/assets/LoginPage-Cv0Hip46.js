import{j as e,m as s}from"./ui-B2BnIfZo.js";import{u as a,b as r,r as t,L as i}from"./vendor-stn_h8-h.js";import{q as l,t as n,v as m,w as c,p as d}from"./index-d2POsy9f.js";import"./utils-Dnvf9ysO.js";const o=()=>{var o,x;const p=a(),u=r(),{login:h,loading:j,error:g,clearError:y,isAuthenticated:f}=l(),b=(null==(x=null==(o=u.state)?void 0:o.from)?void 0:x.pathname)||"/",[v,N]=t.useState(""),[w,k]=t.useState(""),[S,C]=t.useState({});t.useEffect((()=>{f&&p(b,{replace:!0})}),[f,p,b]);return e.jsx("div",{className:"pt-24 pb-16",children:e.jsx("div",{className:"container max-w-md mx-auto",children:e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),g&&e.jsxs(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 text-red-600 p-4 rounded-lg flex items-center gap-3 mb-6",children:[e.jsx(n,{className:"flex-shrink-0"}),e.jsx("p",{children:g})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return v.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v)||(e.email="Please enter a valid email address"):e.email="Email is required",w||(e.password="Password is required"),C(e),0===Object.keys(e).length})())try{await h(v,w)?(d.success("Login successful!"),"admin@drop.ai"===v.toLowerCase()?p("/admin",{replace:!0}):p(b,{replace:!0})):d.error("Login failed. Please try again.")}catch(s){console.error("Login error:",s),d.error(s.message||"An error occurred during login")}},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(m,{className:"text-gray-400"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:v,onChange:e=>{N(e.target.value),S.email&&C((e=>({...e,email:""}))),g&&y()},className:"input pl-10 w-full "+(S.email?"border-red-500 focus:border-red-500 focus:ring-red-500":""),placeholder:"you@example.com",disabled:j})]}),S.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(c,{className:"text-gray-400"})}),e.jsx("input",{type:"password",id:"password",name:"password",value:w,onChange:e=>{k(e.target.value),S.password&&C((e=>({...e,password:""}))),g&&y()},className:"input pl-10 w-full "+(S.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""),placeholder:"••••••••",disabled:j})]}),S.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(i,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:j,className:"btn btn-primary w-full flex items-center justify-center",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(i,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})})]})})})};export{o as default};
