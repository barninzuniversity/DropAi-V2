import{j as e,m as s}from"./ui-B2BnIfZo.js";import{e as t,r as a,L as r}from"./vendor-stn_h8-h.js";import{g as i,u as c,l as d,f as l,b as n,m as o,n as m,o as x,F as h,p as j}from"./index-d2POsy9f.js";import"./utils-Dnvf9ysO.js";const u=()=>{const{id:u}=t(),{products:p}=i(),{addItem:b}=c(),[N,f]=a.useState(null),[v,g]=a.useState(!0),[y,k]=a.useState(1),[w,S]=a.useState(!1);a.useEffect((()=>{g(!0);const e=p.find((e=>{return s=e.id,t=u,String(s)===String(t);var s,t}));e?(console.log("Found product:",e),f(e)):(console.error("Product not found with ID:",u),console.log("Available products:",p.map((e=>({id:e.id,name:e.name}))))),g(!1)}),[u,p]);const A=e=>{const s=Math.max(1,y+e);k(s)};return v?e.jsx("div",{className:"pt-24 pb-16",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})})})}):N?e.jsx("div",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"container",children:[e.jsxs(r,{to:"/products",className:"inline-flex items-center text-primary-600 hover:text-primary-700 mb-8",children:[e.jsx(d,{className:"mr-2"})," Back to Products"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-md overflow-hidden",children:e.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover"})}),e.jsx(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:N.name}),e.jsx("button",{onClick:()=>{S(!w),j.success(w?"Removed from favorites":"Added to favorites")},className:"p-2 rounded-full "+(w?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"),children:e.jsx(l,{className:"text-xl"})})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map(((s,t)=>e.jsx(n,{className:t<4?"text-yellow-400 fill-current":"text-gray-300"},t)))}),e.jsx("span",{className:"text-gray-600",children:"(4.0)"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[N.price.toFixed(2)," TND"]}),N.stock>0?e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(o,{className:"mr-2"}),e.jsxs("span",{children:["In Stock (",N.stock," available)"]})]}):e.jsx("div",{className:"text-red-600",children:"Out of Stock"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:N.description||"No description available."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>A(-1),className:"p-2 rounded-md border hover:bg-gray-50",disabled:y<=1,children:e.jsx(m,{})}),e.jsx("span",{className:"w-16 text-center",children:y}),e.jsx("button",{onClick:()=>A(1),className:"p-2 rounded-md border hover:bg-gray-50",disabled:0===N.stock||y>=N.stock,children:e.jsx(x,{})})]}),e.jsxs("button",{onClick:()=>{if(!N)return;b(N,y)?j.success(`Added ${y} ${1===y?"item":"items"} to cart`):j.error("Failed to add to cart. Item may be out of stock.")},disabled:0===N.stock,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(h,{}),"Add to Cart"]})]})]})})]})]})}):e.jsx("div",{className:"pt-24 pb-16",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The product you're looking for doesn't exist."}),e.jsx(r,{to:"/products",className:"btn btn-primary",children:"Back to Products"})]})})})};export{u as default};
