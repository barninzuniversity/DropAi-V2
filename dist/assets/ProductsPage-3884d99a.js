import{u as e,j as s,f as t,F as i,b as a,g as r,h as n,i as c,k as l,l as o}from"./index-8cb3ece3.js";import{r as d,L as m}from"./vendor-1b10af89.js";import{u as x}from"./index-411b2f9c.js";import{m as u}from"./ui-55e5424c.js";import"./utils-915a2c87.js";const p=({product:r})=>{const[n,c]=d.useState(!1),[l,o]=d.useState(!1),{addItem:x}=e(),p=(e=>{if(e.discounts&&e.discounts.length>0){const s=e.discounts.find((e=>e.active));return s?s.value:0}return e.discount?e.discount:0})(r),h=p>0,g=e=>`${e.toFixed(2)} TND`,j=h?(f=r.price)-f*(p/100):r.price;var f;return s.jsx(u.div,{className:"card group h-full flex flex-col",whileHover:{y:-10},onHoverStart:()=>c(!0),onHoverEnd:()=>c(!1),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsxs(m,{to:`/products/${r.id}`,className:"block h-full",children:[s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx(u.img,{src:r.image,alt:r.name,className:"w-full h-64 object-cover",animate:{scale:n?1.1:1},transition:{duration:.5}}),h&&s.jsxs("div",{className:"absolute top-4 right-4 bg-accent-500 text-white text-sm font-bold px-3 py-1 rounded-full z-10",children:[p,"% OFF"]}),s.jsxs(u.div,{className:"absolute bottom-4 right-4 flex flex-col space-y-2",initial:{opacity:0,x:20},animate:{opacity:n?1:0,x:n?0:20},transition:{duration:.3},children:[s.jsx(u.button,{onClick:e=>{e.preventDefault(),e.stopPropagation(),o(!l)},className:"w-10 h-10 rounded-full flex items-center justify-center shadow-lg "+(l?"bg-red-500 text-white":"bg-white text-gray-700"),whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(t,{className:l?"fill-current":""})}),s.jsx(u.button,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x({...r,price:j,originalPrice:r.price,discountPercentage:p})},className:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(i,{})})]})]}),s.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"flex text-accent-500",children:[...Array(5)].map(((e,t)=>s.jsx(a,{className:""+(t<Math.floor(r.rating)?"fill-current":"")},t)))}),s.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:[r.reviews," reviews"]})]}),s.jsx("h3",{className:"text-lg font-bold mb-1 text-gray-800 group-hover:text-primary-600 transition-colors duration-300",children:r.name}),s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:r.description}),s.jsx("div",{className:"mt-auto flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-lg font-bold text-primary-600",children:g(j)}),s.jsx("span",{className:"text-sm text-gray-500 line-through ml-2",children:g(r.price)})]}):s.jsx("span",{className:"text-lg font-bold text-primary-600",children:g(r.price)})})]})]})})},h=()=>{const{products:e}=r(),[t,i]=d.useState([]),[a,m]=d.useState(!0),[h,g]=d.useState(!1),[j,f]=d.useState("grid"),[y,b]=d.useState("featured"),[v,N]=d.useState({categories:[],priceRange:[0,1e3],rating:0}),[w,k]=x({threshold:.1,triggerOnce:!0}),C=[...new Set(e.map((e=>e.category)))];d.useEffect((()=>{m(!0),setTimeout((()=>{i(e),m(!1)}),300)}),[e]),d.useEffect((()=>{if(0===e.length)return;let s=[...e];switch(v.categories.length>0&&(s=s.filter((e=>v.categories.includes(e.category)))),s=s.filter((e=>{const s=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,t=s>0?e.price-e.price*(s/100):e.price;return t>=v.priceRange[0]&&t<=v.priceRange[1]})),v.rating>0&&(s=s.filter((e=>(e.rating||0)>=v.rating))),y){case"price-low":s.sort(((e,s)=>{const t=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,i=s.discounts&&s.discounts.length>0&&s.discounts[0].active?s.discounts[0].value:0;return(t>0?e.price-e.price*(t/100):e.price)-(i>0?s.price-s.price*(i/100):s.price)}));break;case"price-high":s.sort(((e,s)=>{const t=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,i=s.discounts&&s.discounts.length>0&&s.discounts[0].active?s.discounts[0].value:0,a=t>0?e.price-e.price*(t/100):e.price;return(i>0?s.price-s.price*(i/100):s.price)-a}));break;case"rating":s.sort(((e,s)=>(s.rating||0)-(e.rating||0)));break;case"newest":s.sort(((e,s)=>s.id-e.id))}i(s)}),[e,v,y]);const S=()=>{N({categories:[],priceRange:[0,1e3],rating:0}),b("featured")},R=e=>`${e} TND`,F={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return s.jsx("div",{className:"pt-24 pb-16",children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"mb-12 text-center",children:[s.jsx(u.h1,{className:"text-4xl font-bold mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"All Products"}),s.jsx(u.p,{className:"text-gray-600 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Browse our curated collection of premium products, personalized for your unique style and preferences."})]}),s.jsx("div",{className:"lg:hidden mb-6",children:s.jsxs("button",{onClick:()=>{g(!h)},className:"btn btn-outline w-full flex items-center justify-center gap-2",children:[s.jsx(n,{})," ",h?"Hide Filters":"Show Filters"]})}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx(u.aside,{className:`lg:w-64 ${h?"block":"hidden"} lg:block`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.3},children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-24",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Filters"}),s.jsx("button",{onClick:S,className:"text-primary-600 text-sm hover:underline",children:"Clear All"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Categories"}),s.jsx("div",{className:"space-y-2",children:C.map((e=>s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:v.categories.includes(e),onChange:()=>(e=>{N((s=>{const t=s.categories.includes(e)?s.categories.filter((s=>s!==e)):[...s.categories,e];return{...s,categories:t}}))})(e),className:"form-checkbox h-5 w-5 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),s.jsx("span",{className:"ml-2 text-gray-700",children:e})]},e)))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-bold mb-3",children:"Price Range"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600 text-sm",children:R(v.priceRange[0])}),s.jsx("span",{className:"text-gray-600 text-sm",children:R(v.priceRange[1])})]}),s.jsx("input",{type:"range",min:"0",max:"1000",step:"10",value:v.priceRange[1],onChange:e=>{return s=v.priceRange[0],t=parseInt(e.target.value),void N((e=>({...e,priceRange:[s,t]})));var s,t},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold mb-3",children:"Rating"}),s.jsx("div",{className:"space-y-2",children:[4,3,2,1].map((e=>s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"rating",checked:v.rating===e,onChange:()=>(e=>{N((s=>({...s,rating:e})))})(e),className:"form-radio h-5 w-5 text-primary-600 border-gray-300 focus:ring-primary-500"}),s.jsxs("span",{className:"ml-2 text-gray-700",children:[e,"+ Stars"]})]},e)))})]})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-gray-600 mr-2",children:"Sort by:"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:y,onChange:e=>b(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"featured",children:"Featured"}),s.jsx("option",{value:"price-low",children:"Price: Low to High"}),s.jsx("option",{value:"price-high",children:"Price: High to Low"}),s.jsx("option",{value:"rating",children:"Highest Rated"}),s.jsx("option",{value:"newest",children:"Newest"})]}),s.jsx(c,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-600 mr-2",children:"View:"}),s.jsx("button",{onClick:()=>f("grid"),className:"p-2 rounded-md "+("grid"===j?"bg-primary-100 text-primary-600":"text-gray-500 hover:bg-gray-100"),"aria-label":"Grid view",children:s.jsx(l,{})}),s.jsx("button",{onClick:()=>f("list"),className:"p-2 rounded-md "+("list"===j?"bg-primary-100 text-primary-600":"text-gray-500 hover:bg-gray-100"),"aria-label":"List view",children:s.jsx(o,{})})]})]}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Showing ",t.length," ",1===t.length?"product":"products"]}),a?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):0===t.length?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"No products found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to find what you're looking for."}),s.jsx("button",{onClick:S,className:"btn btn-primary",children:"Clear Filters"})]}):s.jsx(u.div,{ref:w,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:k?"visible":"hidden",className:"grid"===j?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:t.map((e=>s.jsx(u.div,{variants:F,children:s.jsx(p,{product:e})},e.id)))})]})]})]})})};export{h as default};
