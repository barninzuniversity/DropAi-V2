import{j as e,m as s}from"./ui-B2BnIfZo.js";import{r as t,L as i}from"./vendor-stn_h8-h.js";import{u as a}from"./index-BayK3TRu.js";import{u as r,f as n,F as c,b as l,g as o,h as d,i as m,j as x,k as u}from"./index-d2POsy9f.js";import"./utils-Dnvf9ysO.js";const p=({product:a})=>{const[o,d]=t.useState(!1),[m,x]=t.useState(!1),{addItem:u}=r(),p=(e=>{if(e.discounts&&e.discounts.length>0){const s=e.discounts.find((e=>e.active));return s?s.value:0}return e.discount?e.discount:0})(a),h=p>0,g=e=>`${e.toFixed(2)} TND`,j=h?(f=a.price)-f*(p/100):a.price;var f;return e.jsx(s.div,{className:"card group h-full flex flex-col",whileHover:{y:-10},onHoverStart:()=>d(!0),onHoverEnd:()=>d(!1),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(i,{to:`/products/${a.id}`,className:"block h-full",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(s.img,{src:a.image,alt:a.name,className:"w-full h-64 object-cover",animate:{scale:o?1.1:1},transition:{duration:.5}}),h&&e.jsxs("div",{className:"absolute top-4 right-4 bg-accent-500 text-white text-sm font-bold px-3 py-1 rounded-full z-10",children:[p,"% OFF"]}),e.jsxs(s.div,{className:"absolute bottom-4 right-4 flex flex-col space-y-2",initial:{opacity:0,x:20},animate:{opacity:o?1:0,x:o?0:20},transition:{duration:.3},children:[e.jsx(s.button,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x(!m)},className:"w-10 h-10 rounded-full flex items-center justify-center shadow-lg "+(m?"bg-red-500 text-white":"bg-white text-gray-700"),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(n,{className:m?"fill-current":""})}),e.jsx(s.button,{onClick:e=>{e.preventDefault(),e.stopPropagation(),u({...a,price:j,originalPrice:a.price,discountPercentage:p})},className:"w-10 h-10 rounded-full bg-primary-600 text-white flex items-center justify-center shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(c,{})})]})]}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"flex text-accent-500",children:[...Array(5)].map(((s,t)=>e.jsx(l,{className:""+(t<Math.floor(a.rating)?"fill-current":"")},t)))}),e.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:[a.reviews," reviews"]})]}),e.jsx("h3",{className:"text-lg font-bold mb-1 text-gray-800 group-hover:text-primary-600 transition-colors duration-300",children:a.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:a.description}),e.jsx("div",{className:"mt-auto flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-lg font-bold text-primary-600",children:g(j)}),e.jsx("span",{className:"text-sm text-gray-500 line-through ml-2",children:g(a.price)})]}):e.jsx("span",{className:"text-lg font-bold text-primary-600",children:g(a.price)})})]})]})})},h=()=>{const{products:i}=o(),[r,n]=t.useState([]),[c,l]=t.useState(!0),[h,g]=t.useState(!1),[j,f]=t.useState("grid"),[y,b]=t.useState("featured"),[v,N]=t.useState({categories:[],priceRange:[0,1e3],rating:0}),[w,k]=a({threshold:.1,triggerOnce:!0}),C=[...new Set(i.map((e=>e.category)))];t.useEffect((()=>{l(!0),setTimeout((()=>{n(i),l(!1)}),300)}),[i]),t.useEffect((()=>{if(0===i.length)return;let e=[...i];switch(v.categories.length>0&&(e=e.filter((e=>v.categories.includes(e.category)))),e=e.filter((e=>{const s=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,t=s>0?e.price-e.price*(s/100):e.price;return t>=v.priceRange[0]&&t<=v.priceRange[1]})),v.rating>0&&(e=e.filter((e=>(e.rating||0)>=v.rating))),y){case"price-low":e.sort(((e,s)=>{const t=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,i=s.discounts&&s.discounts.length>0&&s.discounts[0].active?s.discounts[0].value:0;return(t>0?e.price-e.price*(t/100):e.price)-(i>0?s.price-s.price*(i/100):s.price)}));break;case"price-high":e.sort(((e,s)=>{const t=e.discounts&&e.discounts.length>0&&e.discounts[0].active?e.discounts[0].value:0,i=s.discounts&&s.discounts.length>0&&s.discounts[0].active?s.discounts[0].value:0,a=t>0?e.price-e.price*(t/100):e.price;return(i>0?s.price-s.price*(i/100):s.price)-a}));break;case"rating":e.sort(((e,s)=>(s.rating||0)-(e.rating||0)));break;case"newest":e.sort(((e,s)=>s.id-e.id))}n(e)}),[i,v,y]);const S=()=>{N({categories:[],priceRange:[0,1e3],rating:0}),b("featured")},R=e=>`${e} TND`,F={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsx("div",{className:"pt-24 pb-16",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx(s.h1,{className:"text-4xl font-bold mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"All Products"}),e.jsx(s.p,{className:"text-gray-600 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Browse our curated collection of premium products, personalized for your unique style and preferences."})]}),e.jsx("div",{className:"lg:hidden mb-6",children:e.jsxs("button",{onClick:()=>{g(!h)},className:"btn btn-outline w-full flex items-center justify-center gap-2",children:[e.jsx(d,{})," ",h?"Hide Filters":"Show Filters"]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx(s.aside,{className:`lg:w-64 ${h?"block":"hidden"} lg:block`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.3},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filters"}),e.jsx("button",{onClick:S,className:"text-primary-600 text-sm hover:underline",children:"Clear All"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-bold mb-3",children:"Categories"}),e.jsx("div",{className:"space-y-2",children:C.map((s=>e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.categories.includes(s),onChange:()=>(e=>{N((s=>{const t=s.categories.includes(e)?s.categories.filter((s=>s!==e)):[...s.categories,e];return{...s,categories:t}}))})(s),className:"form-checkbox h-5 w-5 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-700",children:s})]},s)))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-bold mb-3",children:"Price Range"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:R(v.priceRange[0])}),e.jsx("span",{className:"text-gray-600 text-sm",children:R(v.priceRange[1])})]}),e.jsx("input",{type:"range",min:"0",max:"1000",step:"10",value:v.priceRange[1],onChange:e=>{return s=v.priceRange[0],t=parseInt(e.target.value),void N((e=>({...e,priceRange:[s,t]})));var s,t},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-3",children:"Rating"}),e.jsx("div",{className:"space-y-2",children:[4,3,2,1].map((s=>e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"rating",checked:v.rating===s,onChange:()=>(e=>{N((s=>({...s,rating:e})))})(s),className:"form-radio h-5 w-5 text-primary-600 border-gray-300 focus:ring-primary-500"}),e.jsxs("span",{className:"ml-2 text-gray-700",children:[s,"+ Stars"]})]},s)))})]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"Sort by:"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:y,onChange:e=>b(e.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg py-2 pl-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"featured",children:"Featured"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"rating",children:"Highest Rated"}),e.jsx("option",{value:"newest",children:"Newest"})]}),e.jsx(m,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 mr-2",children:"View:"}),e.jsx("button",{onClick:()=>f("grid"),className:"p-2 rounded-md "+("grid"===j?"bg-primary-100 text-primary-600":"text-gray-500 hover:bg-gray-100"),"aria-label":"Grid view",children:e.jsx(x,{})}),e.jsx("button",{onClick:()=>f("list"),className:"p-2 rounded-md "+("list"===j?"bg-primary-100 text-primary-600":"text-gray-500 hover:bg-gray-100"),"aria-label":"List view",children:e.jsx(u,{})})]})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Showing ",r.length," ",1===r.length?"product":"products"]}),c?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):0===r.length?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to find what you're looking for."}),e.jsx("button",{onClick:S,className:"btn btn-primary",children:"Clear Filters"})]}):e.jsx(s.div,{ref:w,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:k?"visible":"hidden",className:"grid"===j?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:r.map((t=>e.jsx(s.div,{variants:F,children:e.jsx(p,{product:t})},t.id)))})]})]})]})})};export{h as default};
